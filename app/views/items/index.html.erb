<p id="notice"><%= notice %></p>

<h1>Items</h1>
<% if user_signed_in? %>
<li>
    <%= link_to('Logout', destroy_user_session_path, method: :delete) %>
</li>
<% else %>
<li>
    <%= link_to('Login', new_user_session_path) %>
<li class='nav-item'><%= link_to "Sign up", new_user_registration_path, class: "nav-link" %></li>
</li>
<% end %>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Price</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @items.each do |item| %>
    <tr>
      <% if item.photo.attached? %>
      <td><%= image_tag (item.photo) %></td>
      <% end %>
      <td><%= item.name %></td>
      <td><%= item.description %></td>
      <td><%= item.price %></td>
      <td><%= link_to 'Show', item %></td>
      <td><%= link_to 'Edit', edit_item_path(item) %></td>
      <td><%= link_to 'Destroy', item, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <td>
        <%= form_for @cart do |f| %>
        <%= f.hidden_field :user, :value => current_user.id %>
        <%= f.hidden_field :item, :value => item.id %>
        <div class="form-group">
          <%= f.label :Qty %><br />
          <%= f.number_field :quantity, :value => 1,  class: "form-control" %>
        </div>
        <div class="actions">
          <%= f.submit "Add to cart" , class: "btn btn-lg btn-primary btn-block" %>
        </div>
        <% end %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Item', new_item_path %>
